#############################################
# Пример .env для бекенда (FastAPI, backend) #
#############################################

# Как использовать этот файл:
# 1) Локально: скопируйте в `.env` и заполните значениями.
#    Пример: `cp backend/.env.example backend/.env`.
# 2) Dokploy/Production: файлы `.env` не используются —
#    все переменные задаются через Dokploy Environments.

# Что обязательно:
# - SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY
# - RAPID_API_KEY, TAVILY_API_KEY
# - FIRECRAWL_API_KEY (FIRECRAWL_URL опционально)
# - Как минимум один LLM-провайдер (например OPENAI_API_KEY или ANTHROPIC_API_KEY)

# Безопасность:
# - Секреты хранятся ТОЛЬКО на сервере (нет префикса NEXT_PUBLIC).
# - Не храните реальные секреты в репозитории, используйте Dokploy Environments.

# Удобные значения по умолчанию:
# - Для необязательных переменных проставлены заглушки,
#   чтобы сборка и запуск не падали при их отсутствии.

# =============================
# Типичные значения
# =============================
# Локальная разработка:
# - ENV_MODE=local
# - FRONTEND_URL=http://localhost:3000
# - CORS_ALLOWED_ORIGINS=http://localhost:3000
# - REDIS_HOST=redis (при docker compose) или localhost (полностью локально)
# - LOGGING_LEVEL=DEBUG (при необходимости)
# Dokploy/Production:
# - ENV_MODE=production
# - FRONTEND_URL=https://<ваш-домен>
# - CORS_ALLOWED_ORIGINS=https://<ваш-домен>
# - REDIS_HOST=<внешний-redis-хост> (если используется внешний Redis)
# - LOGGING_LEVEL=INFO

# =============================
# Быстрый старт
# =============================
# Локально (docker compose):
# 1) Скопируйте этот файл в backend/.env
# 2) Заполните ОБЯЗАТЕЛЬНЫЕ переменные (Supabase, LLM ключ, Rapid/Tavily, Firecrawl)
# 3) Запустите docker compose
# Dokploy:
# 1) Создайте приложение для бекенда и задайте переменные через Dokploy Environments
# 2) Используйте значения из раздела «Типичные значения» для Production
# 3) Убедитесь, что CORS настроен на домен фронтенда

# Режим окружения: local | staging | production
ENV_MODE=local

##### DATABASE (REQUIRED)
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

##### REDIS
# При docker compose используйте "redis", для полностью локального — "localhost"
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
# Для local/docker compose оставьте false
REDIS_SSL=false
LOGGING_LEVEL=INFO

##### LLM PROVIDERS (как минимум один ФУНКЦИОНАЛЬНО обязателен)
# Укажите хотя бы один из провайдеров ниже:
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
GROQ_API_KEY=
OPENROUTER_API_KEY=
GEMINI_API_KEY=
XAI_API_KEY=
OPENROUTER_API_BASE=https://openrouter.ai/api/v1
OR_SITE_URL=https://kortix.ai
OR_APP_NAME=Kortix AI

# AWS Bedrock (only if using Bedrock)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION_NAME=

# OpenAI-compatible (совместимые API)
OPENAI_COMPATIBLE_API_KEY=
OPENAI_COMPATIBLE_API_BASE=

##### DATA / SEARCH (REQUIRED)
RAPID_API_KEY=
TAVILY_API_KEY=

##### WEB SCRAPE (REQUIRED)
FIRECRAWL_API_KEY=
# Если пусто, используется дефолт: https://api.firecrawl.dev
FIRECRAWL_URL=

##### AGENT SANDBOX (опционально; требуется только для Daytona)
DAYTONA_API_KEY=
DAYTONA_SERVER_URL=https://app.daytona.io/api
DAYTONA_TARGET=us

##### SECURITY & WEBHOOKS (рекомендуется)
MCP_CREDENTIAL_ENCRYPTION_KEY=
TRIGGER_WEBHOOK_SECRET=
VERCEL_PROTECTION_BYPASS_KEY=

##### OBSERVABILITY (опционально)
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=https://cloud.langfuse.com
SENTRY_DSN=

##### BILLING (опционально)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_DEFAULT_PLAN_ID=
STRIPE_DEFAULT_TRIAL_DAYS=14

##### ADMIN (опционально)
KORTIX_ADMIN_API_KEY=

##### INTEGRATIONS (опционально)
COMPOSIO_API_KEY=
COMPOSIO_WEBHOOK_SECRET=
COMPOSIO_API_BASE=https://backend.composio.dev

##### GOOGLE INTEGRATIONS (опционально; для загрузки в Google Slides)
# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8000/api/google/callback

ZENDESK_AUTH_CONFIG=""
EXA_API_KEY=""
CHUNKR_API_KEY=""

##### FRONTEND URL & LIMITS (опционально)
# Публичный URL фронтенда для редиректов и ссылок
FRONTEND_URL=http://localhost:3000
# Максимум параллельных запусков агентов за 24 часа
MAX_PARALLEL_AGENT_RUNS=50

##### CORS (опционально)
# Список разрешенных origin через запятую (напр. https://example.com, http://localhost:3000)
CORS_ALLOWED_ORIGINS=
# Дополнительный одиночный origin фронтенда
FRONTEND_ORIGIN=
# Regex для динамических origin (напр. https://app-.*\.vercel\.app)
ALLOW_ORIGIN_REGEX=

# =============================
# Справочник переменных (формат/пример)
# =============================
# ENV_MODE: one of local|staging|production (пример: production)
# SUPABASE_URL: URL (пример: https://xyzcompany.supabase.co)
# SUPABASE_ANON_KEY: строка/JWT (пример: eyJ...)
# SUPABASE_SERVICE_ROLE_KEY: строка (пример: service_role_...)
# REDIS_HOST: строка (пример: redis или localhost)
# REDIS_PORT: целое число (пример: 6379)
# REDIS_PASSWORD: строка (может быть пустым)
# REDIS_SSL: boolean (true|false), для локальной разработки false
# LOGGING_LEVEL: один из INFO|DEBUG|WARNING|ERROR (пример: INFO)
# ANTHROPIC_API_KEY, OPENAI_API_KEY, GROQ_API_KEY, OPENROUTER_API_KEY, GEMINI_API_KEY, XAI_API_KEY: строки-ключи (пример: sk-...)
# OPENROUTER_API_BASE: URL (пример: https://openrouter.ai/api/v1)
# OR_SITE_URL: URL сайта (пример: https://kortix.ai)
# OR_APP_NAME: название приложения (пример: Kortix AI)
# AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY: строки; AWS_REGION_NAME: регион (пример: us-east-1)
# OPENAI_COMPATIBLE_API_KEY: строка; OPENAI_COMPATIBLE_API_BASE: URL
# RAPID_API_KEY, TAVILY_API_KEY: строки
# FIRECRAWL_API_KEY: строка; FIRECRAWL_URL: URL (если пусто, дефолт https://api.firecrawl.dev)
# DAYTONA_API_KEY: строка; DAYTONA_SERVER_URL: URL; DAYTONA_TARGET: строка (пример: us)
# MCP_CREDENTIAL_ENCRYPTION_KEY, TRIGGER_WEBHOOK_SECRET, VERCEL_PROTECTION_BYPASS_KEY: строки
# LANGFUSE_PUBLIC_KEY, LANGFUSE_SECRET_KEY: строки; LANGFUSE_HOST: URL (пример: https://cloud.langfuse.com)
# SENTRY_DSN: URL-DSN (пример: https://examplePublicKey@o0.ingest.sentry.io/0)
# STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET, STRIPE_DEFAULT_PLAN_ID: строки; STRIPE_DEFAULT_TRIAL_DAYS: целое число (пример: 14)
# KORTIX_ADMIN_API_KEY: строка
# COMPOSIO_API_KEY, COMPOSIO_WEBHOOK_SECRET: строки; COMPOSIO_API_BASE: URL
# GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET: строки; GOOGLE_REDIRECT_URI: URL (пример: http://localhost:8000/api/google/callback)
# ZENDESK_AUTH_CONFIG: JSON-строка (пример: "{\"client_id\":\"...\"}")
# EXA_API_KEY, CHUNKR_API_KEY: строки
# FRONTEND_URL: URL (пример: https://suna.zaruba-ds.ru)
# MAX_PARALLEL_AGENT_RUNS: целое число (пример: 50)
# CORS_ALLOWED_ORIGINS: comma-separated URLs (пример: https://suna.zaruba-ds.ru, http://localhost:3000)
# FRONTEND_ORIGIN: URL (пример: https://suna.zaruba-ds.ru)
# ALLOW_ORIGIN_REGEX: регулярное выражение (пример: https://app-.*\.vercel\.app)

# =============================
# Пример заполнения (Production)
# =============================
# ENV_MODE=production
# SUPABASE_URL=https://xyzcompany.supabase.co
# SUPABASE_ANON_KEY=... (строка)
# SUPABASE_SERVICE_ROLE_KEY=... (строка)
# OPENAI_API_KEY=sk-...
# RAPID_API_KEY=...
# TAVILY_API_KEY=...
# FIRECRAWL_API_KEY=...
# FRONTEND_URL=https://suna.zaruba-ds.ru
# FRONTEND_ORIGIN=https://suna.zaruba-ds.ru
# CORS_ALLOWED_ORIGINS=https://suna.zaruba-ds.ru
